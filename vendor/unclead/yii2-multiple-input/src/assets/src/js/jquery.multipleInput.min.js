!function(t){t.fn.multipleInput=function(e){return r[e]?r[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?(t.error("Method "+e+" does not exist on jQuery.multipleInput"),!1):r.init.apply(this,arguments)};var e={afterInit:"afterInit",afterAddRow:"afterAddRow",beforeDeleteRow:"beforeDeleteRow",afterDeleteRow:"afterDeleteRow"},n={id:null,template:null,jsTemplates:[],limit:1,min:1},l={enableAjaxValidation:!1,validateOnBlur:!1,validateOnChange:!1,validateOnType:!1},r={init:function(i){var a=t.extend(!0,{},n,i||{}),u=t("#"+a.id),p=u.closest("form"),o=this.selector.replace("#","");u.data("multipleInput",{settings:a,currentIndex:0,attributeDefaults:{}}),u.on("click.multipleInput",".js-input-remove",function(t){t.preventDefault(),r.removeInput.apply(this)}),u.on("click.multipleInput",".js-input-plus",function(t){t.preventDefault(),r.addInput.apply(this)});var s=setInterval(function(){if("object"==typeof p.data("yiiActiveForm")){var i=p.yiiActiveForm("find",o),n=[];"object"==typeof i&&(t.each(i,function(t,e){-1==["id","input","container"].indexOf(t)&&(n[t]=e)}),p.yiiActiveForm("remove",o));var d=t.extend({},l,a.attributeOptions);t.each(d,function(t,e){"undefined"==typeof n[t]&&(n[t]=e)}),u.data("multipleInput").attributeDefaults=n,u.find(".multiple-input-list").find("input, select, textarea").each(function(){r.addAttribute.apply(this)}),u.data("multipleInput").currentIndex=u.find(".multiple-input-list__item").length,clearInterval(s);var f=t.Event(e.afterInit);u.trigger(f)}},100)},addInput:function(){var n=t(this).closest(".multiple-input").first(),l=n.data("multipleInput"),a=l.settings,u=a.template,p=n.find(".multiple-input-list").first(),o=n.find(".multiple-input-list__item").length;if(!(null!=a.limit&&o>=a.limit)){u=u.replaceAll("{multiple_index}",l.currentIndex),t(u).hide().appendTo(p).fadeIn(300),t(u).find("input, select, textarea").each(function(){r.addAttribute.apply(this)});var s;for(i in a.jsTemplates)s=a.jsTemplates[i].replaceAll("{multiple_index}",l.currentIndex).replaceAll("%7Bmultiple_index%7D",l.currentIndex),window.eval(s);n.data("multipleInput").currentIndex++;var d=t.Event(e.afterAddRow);n.trigger(d)}},removeInput:function(){var i=t(this).closest(".multiple-input").first(),n=t(this).closest(".multiple-input-list__item"),l=t(".multiple-input-list__item").length,a=i.data("multipleInput"),u=a.settings;if(l>u.min){var p=t.Event(e.beforeDeleteRow);if(i.trigger(p,[n]),p.result===!1)return;n.find("input, select, textarea").each(function(){r.removeAttribute.apply(this)}),n.fadeOut(300,function(){t(this).remove()}),p=t.Event(e.afterDeleteRow),i.trigger(p)}},addAttribute:function(){var e=t(this).attr("id"),i=t("#"+t(this).attr("id")),n=i.closest(".multiple-input").first(),l=i.closest("form");if(0!=n.length){var r=n.data("multipleInput");l.yiiActiveForm("add",t.extend({},r.attributeDefaults,{id:e,input:"#"+e,container:".field-"+e}))}},removeAttribute:function(){var e=t(this).attr("id"),i=t("#"+t(this).attr("id")).closest("form");0!==i.length&&i.yiiActiveForm("remove",e)}};String.prototype.replaceAll=function(t,e){return this.split(t).join(e)}}(window.jQuery);